(function(){var a,b;b=function(){function b(){this.storage=[],this.count=0,this.loaded=0}return b.prototype.loadManifest=function(b){var c,d,e,f,g;for(this.count=b.length,g=[],e=0,f=b.length;f>e;e++)d=b[e],c=new a(d.alias,d.path,!0),g.push(this.storage[d.alias]=c);return g},b.prototype.get=function(a){return this.storage[a]},b}(),a=function(){function a(a,b,c){this.alias=a,this.path=b,this.texture=void 0,this.size=new Kido.Size(0,0),this.ready=!1,c&&this.load()}return a.prototype.load=function(){var a;return void 0===this.texture?(a=this,this.texture=new Image,this.texture.onload=function(){return Kido.AssetStorage.loaded++,a.ready=!0,a.size=new Kido.Size(this.width,this.height),Kido.AssetStorage.loaded===Kido.AssetStorage.count?(Kido.AssetStorage.loaded=0,Kido.AssetStorage.count=0,Kido.EventEmitter.dispatch("assets.complete")):void 0},this.texture.src=this.path):void 0},a}(),void 0===window.Kido&&(window.Kido={}),Kido.Asset=a,Kido.AssetStorage=new b}).call(this),function(){var a;a=function(){function a(){}return a.emitters=[],a.when=function(a,b){return this.emitters[a]=b},a.dispatch=function(a){return void 0!==this.emitters[a]?this.emitters[a]():void 0},a}(),void 0===window.Kido&&(window.Kido={}),Kido.EventEmitter=a}.call(this),function(){var a,b;b=function(){function a(a){var b;this.canvas=new Kido.Canvas(this,document.getElementById(a)),this.gametime=0,b=this,Kido.SceneManager.setScene(new Kido.Scenes.InGame),setInterval(function(){return b.gameloop()},1e3/60)}return a.prototype.gameloop=function(){return this.canvas.canvas.width=this.canvas.canvas.width,this.update(),this.render()},a.prototype.update=function(){return Kido.SceneManager.update(this.gametime),this.gametime++},a.prototype.render=function(){return Kido.SceneManager.render(this)},a.prototype.setStyle=function(a,b){switch(a){case"bgcolor":return this.style_bgColor=b}},a}(),a=function(){function a(a,b){this.engine=a,this.canvas=b,this.ctx=this.canvas.getContext("2d"),this.bgColor="#ffffff"}return a}(),void 0===window.Kido?window.Kido={KidoEngine:b,Canvas:a,Scenes:{}}:(Kido.KidoEngine=b,Kido.Canvas=a,void 0===Kido.Scenes&&(Kido.Scenes={}))}.call(this),function(){var a;$(function(){var b;return b=new a}),a=function(){function a(){this.engine=new Kido.KidoEngine("game")}return a}(),Kido.GameBootstrap=a}.call(this),function(){var a,b;b=function(){function a(){this.currentScene=void 0}return a.prototype.setScene=function(a){return void 0!==this.currentScene&&(console.log("Leave scene : "+this.currentScene.name),this.currentScene.leave()),this.currentScene=a,console.log("Enter scene : "+this.currentScene.name),this.currentScene.enter()},a.prototype.update=function(a){return void 0!==this.currentScene?this.currentScene.update(a):void 0},a.prototype.render=function(a){return void 0!==this.currentScene?this.currentScene.render(a):void 0},a}(),a=function(){function a(a,b){var c;this.name=a,this.overlays=b,this.stage=new Kido.Container,this.sceneDiv="#scene-"+this.name,c=this,Kido.EventEmitter.when("assets.complete",function(){return c.initialized()})}return a.initialized=function(){},a.prototype.enter=function(){return $(this.sceneDiv).css("display","block")},a.prototype.leave=function(){return $(this.sceneDiv).css("display","none")},a.prototype.update=function(a){return this.stage.update(a)},a.prototype.render=function(a){return this.stage.render(a)},a}(),void 0===window.Kido&&(window.Kido={}),Kido.Scene=a,Kido.SceneManager=new b}.call(this),function(){var a,b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=function(){function a(a,b,c){this.pos=a,this.size=b,this.visible=c}return a}(),d=function(a){function b(a,c){this.asset=a,this.alias=null!=c?c:"undefined",this.scale=1,this.rotation=0,b.__super__.constructor.call(this,new Kido.Vector2f(0,0),new Kido.Size(this.asset.size.width,this.asset.size.height),!0)}return g(b,a),b.fromStorage=function(a,c){return new b(Kido.AssetStorage.get(a),c)},b.prototype.rotate=function(a){return this.rotation+=a},b.prototype.update=function(){},b.prototype.render=function(a){return a.canvas.ctx.save(),a.canvas.ctx.translate(this.pos.x,this.pos.y),a.canvas.ctx.rotate(this.rotation*Math.PI/180),a.canvas.ctx.translate(-this.pos.x,-this.pos.y),a.canvas.ctx.drawImage(this.asset.texture,this.pos.x-this.size.width/2,this.pos.y-this.size.height/2,this.size.width,this.size.height),a.canvas.ctx.restore()},b}(c),b=function(a){function b(a){this.position=a,this.childrens=new Array,this.visible=!0}return g(b,a),b.prototype.addChild=function(a){return this.childrens.push(a),a},b.prototype.getChildByAlias=function(a){var b,c,d,e;for(e=this.childrens,c=0,d=e.length;d>c;c++)if(b=e[c],b.alias===a)return b;return void 0},b.prototype.update=function(a){var b,c,d,e,f;for(e=this.childrens,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.update(a));return f},b.prototype.render=function(a){var b,c,d,e,f;if(this.visible){for(e=this.childrens,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.render(a));return f}},b}(c),e=function(){function a(a,b,c,d){var e,f,g,h,i,j;for(this.asset=a,this.size=b,this.collums=c,this.rows=d,this.mapping=new Array,this.animations=[],f=g=0,i=this.rows-1;i>=0?i>=g:g>=i;f=i>=0?++g:--g)for(e=h=0,j=this.collums-1;j>=0?j>=h:h>=j;e=j>=0?++h:--h)this.mapping.push({x:e*this.size.width,y:f*this.size.height})}return a.fromStorage=function(b,c,d,e){return new a(Kido.AssetStorage.get(b),c,d,e)},a.prototype.buildAnimation=function(a,b){var c,d,e,f;for(d=new Array,e=0,f=b.length;f>e;e++)c=b[e],d.push(this.mapping[c]);return this.animations[a]=d},a.prototype.getAnimatedSprite=function(a){var b;return b=this.animations[a]},a}(),a=function(a){function b(a,c,d,e){b.__super__.constructor.call(this,d,e)}return g(b,a),b.prototype.update=function(){},b}(c),void 0===window.Kido&&(window.Kido={}),Kido.GraphicObject=c,Kido.Sprite=d,Kido.Container=b,Kido.SpriteSheet=e}.call(this),function(){var a,b;a=function(){function a(a,b){this.width=null!=a?a:0,this.height=null!=b?b:0}return a}(),b=function(){function a(a,b){this.x=null!=a?a:0,this.y=null!=b?b:0}return a}(),void 0===window.Kido&&(window.Kido={}),Kido.Size=a,Kido.Vector2f=b}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};a=function(a){function b(){b.__super__.constructor.call(this,"ingame",[])}return c(b,a),b.prototype.enter=function(){return Kido.AssetStorage.loadManifest([{alias:"kido",path:"assets/kido.png"},{alias:"perso1",path:"assets/spritesheet1.png"}]),b.__super__.enter.apply(this,arguments)},b.prototype.initialized=function(){var a;return a=Kido.SpriteSheet.fromStorage("perso1",new Kido.Size(50,50),6,13),console.log(a)},b.prototype.update=function(a){return b.__super__.update.call(this,a)},b.prototype.render=function(a){return b.__super__.render.call(this,a)},b}(Kido.Scene),void 0===window.Kido&&(window.Kido={}),Kido.Scenes.InGame=a}.call(this);